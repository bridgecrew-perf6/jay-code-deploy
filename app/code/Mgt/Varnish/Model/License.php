<?php
 namespace Mgt\Varnish\Model; class License { const MODULE_NAME = "\x4d\147\x74\x5f\126\141\x72\156\151\x73\x68"; protected $dirReader; protected $domains = []; public function __construct() { $objectManager = $this->getObjectManager(); $this->dirReader = $objectManager->get("\x5c\x4d\x61\x67\145\156\164\157\134\x46\x72\141\x6d\x65\167\157\162\153\134\x4d\157\144\x75\x6c\145\x5c\104\151\162\x5c\x52\x65\141\144\x65\162"); } public function hasLicense($currentHost) { goto Fd2bd; Aff93: $today = new \DateTime(); goto Ebdff; d7bd6: if (!(true === file_exists($licenseFile))) { goto c711b; } goto abf2f; E90e8: c711b: goto Cde52; Fd2bd: $hasLicense = false; goto ffcc1; c4b32: eeb3a: goto E90e8; d66e8: $isHostValid = $this->_isHostValid($currentHost, $license["\x64\x6f\155\141\151\156\x73"]); goto Cd55a; Fca70: $hasLicense = true; goto c4b32; ffcc1: $licenseFile = $this->dirReader->getModuleDir('', self::MODULE_NAME) . "\x2f\154\x69\x63\145\x6e\x73\x65\x2e\155\x67\164"; goto d7bd6; Cd55a: if (!(is_array($license) && $license["\155\x6f\x64\165\x6c\x65"] == self::MODULE_NAME && $isHostValid && (!$license["\x65\x78\160\x69\162\145\104\141\164\145"] || $license["\x65\x78\160\x69\x72\145\104\141\164\145"] && $expireDate->isLater(Zend_Date::now())))) { goto eeb3a; } goto Fca70; a04cb: $currentHost = str_replace("\x77\167\x77\56", '', $currentHost); goto Aff93; D53bb: be3fe: goto d66e8; abf2f: eval(gzinflate(base64_decode(file_get_contents($licenseFile)))); goto a04cb; Cde52: return $hasLicense; goto d0161; d727a: $expireDate = new \Zend_Date(); goto A7ad4; A7ad4: $expireDate->setTimestamp($license["\145\170\x70\x69\x72\x65\x44\x61\164\145"]); goto D53bb; Ebdff: if (!(isset($license["\x65\170\160\151\162\x65\x44\x61\x74\x65"]) && $license["\145\x78\x70\151\162\145\x44\141\x74\x65"])) { goto be3fe; } goto d727a; d0161: } protected function _isHostValid($currentHost, array $domains) { goto bd948; A7b49: foreach ($domains as $domain) { goto Bb22e; e0ebd: $isHostValid = true; goto a850a; a850a: goto A8704; goto A4144; Fc3ea: a0b32: goto c1f3d; Bb22e: if (!strstr($currentHost, $domain)) { goto Be9db; } goto e0ebd; A4144: Be9db: goto Fc3ea; c1f3d: } goto b896f; c8cfe: return $isHostValid; goto D294a; bd948: $isHostValid = false; goto A7b49; b896f: A8704: goto c8cfe; D294a: } public function getDomains() { goto A6f38; Ca1f5: return $domains; goto c603f; cb84e: $licenseFile = $this->dirReader->getModuleDir('', self::MODULE_NAME) . "\57\x6c\151\x63\145\156\163\145\56\x6d\x67\x74"; goto B060a; d4ab7: $domains = $license["\x64\157\x6d\141\x69\x6e\163"]; goto f7276; B6282: eval(gzinflate(base64_decode(file_get_contents($licenseFile)))); goto d3539; f7276: d65df: goto Aa306; B060a: if (!(true === file_exists($licenseFile))) { goto c9383; } goto B6282; A6f38: $domains = []; goto cb84e; d3539: if (!(isset($license["\x64\x6f\x6d\x61\151\x6e\163"]) && $license["\144\157\x6d\x61\x69\156\163"])) { goto d65df; } goto d4ab7; Aa306: c9383: goto Ca1f5; c603f: } protected function getObjectManager() { $objectManager = \Magento\Framework\App\ObjectManager::getInstance(); return $objectManager; } }
